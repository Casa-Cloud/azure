# Azure Kubernetes Service RBAC Reader

# Permissions:-

```
"permissions": [
    {
        "actions": [
            "Microsoft.Authorization/*/read",
            "Microsoft.Resources/subscriptions/operationresults/read",
            "Microsoft.Resources/subscriptions/read",
            "Microsoft.Resources/subscriptions/resourceGroups/read"
        ],
        "notActions": [],
        "dataActions": [
            "Microsoft.ContainerService/managedClusters/apps/controllerrevisions/read",
            "Microsoft.ContainerService/managedClusters/apps/daemonsets/read",
            "Microsoft.ContainerService/managedClusters/apps/deployments/read",
            "Microsoft.ContainerService/managedClusters/apps/replicasets/read",
            "Microsoft.ContainerService/managedClusters/apps/statefulsets/read",
            "Microsoft.ContainerService/managedClusters/autoscaling/horizontalpodautoscalers/read",
            "Microsoft.ContainerService/managedClusters/batch/cronjobs/read",
            "Microsoft.ContainerService/managedClusters/batch/jobs/read",
            "Microsoft.ContainerService/managedClusters/configmaps/read",
            "Microsoft.ContainerService/managedClusters/discovery.k8s.io/endpointslices/read",
            "Microsoft.ContainerService/managedClusters/endpoints/read",
            "Microsoft.ContainerService/managedClusters/events.k8s.io/events/read",
            "Microsoft.ContainerService/managedClusters/events/read",
            "Microsoft.ContainerService/managedClusters/extensions/daemonsets/read",
            "Microsoft.ContainerService/managedClusters/extensions/deployments/read",
            "Microsoft.ContainerService/managedClusters/extensions/ingresses/read",
            "Microsoft.ContainerService/managedClusters/extensions/networkpolicies/read",
            "Microsoft.ContainerService/managedClusters/extensions/replicasets/read",
            "Microsoft.ContainerService/managedClusters/limitranges/read",
            "Microsoft.ContainerService/managedClusters/metrics.k8s.io/pods/read",
            "Microsoft.ContainerService/managedClusters/metrics.k8s.io/nodes/read",
            "Microsoft.ContainerService/managedClusters/namespaces/read",
            "Microsoft.ContainerService/managedClusters/networking.k8s.io/ingresses/read",
            "Microsoft.ContainerService/managedClusters/networking.k8s.io/networkpolicies/read",
            "Microsoft.ContainerService/managedClusters/persistentvolumeclaims/read",
            "Microsoft.ContainerService/managedClusters/pods/read",
            "Microsoft.ContainerService/managedClusters/policy/poddisruptionbudgets/read",
            "Microsoft.ContainerService/managedClusters/replicationcontrollers/read",
            "Microsoft.ContainerService/managedClusters/resourcequotas/read",
            "Microsoft.ContainerService/managedClusters/serviceaccounts/read",
            "Microsoft.ContainerService/managedClusters/services/read"
        ],
        "notDataActions": []
    }
]
```

## ‚úÖ What It Can Do
| **Capability** | **‚úÖ Allowed?** | **Reason (Based on Permissions)** |
|---------------|----------------|----------------------------------|
| **Read Azure Authorization Policies** | ‚úÖ Yes | `Microsoft.Authorization/*/read` |
| **View Azure Subscription Details** | ‚úÖ Yes | `Microsoft.Resources/subscriptions/read` |
| **View Resource Groups** | ‚úÖ Yes | `Microsoft.Resources/subscriptions/resourceGroups/read` |
| **View AKS Cluster Subscription Operations** | ‚úÖ Yes | `Microsoft.Resources/subscriptions/operationresults/read` |
| **View Deployments, ReplicaSets, StatefulSets** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/apps/deployments/read` |
| **View DaemonSets and ControllerRevisions** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/apps/daemonsets/read` |
| **View Horizontal Pod Autoscalers** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/autoscaling/horizontalpodautoscalers/read` |
| **View CronJobs and Jobs** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/batch/cronjobs/read` |
| **View ConfigMaps and Endpoints** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/configmaps/read` |
| **View Events and Logs** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/events.k8s.io/events/read` |
| **View Namespaces** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/namespaces/read` |
| **View Ingress Controllers and Network Policies** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/extensions/ingresses/read` |
| **View Pods and Persistent Volume Claims (PVCs)** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/pods/read` |
| **View Service Accounts and Services** | ‚úÖ Yes | `Microsoft.ContainerService/managedClusters/serviceaccounts/read` |

## ‚ùå What It CANNOT Do
| **Capability** | **‚ùå Not Allowed?** | **Reason (Missing Permissions)** |
|---------------|--------------------|----------------------------------|
| **Modify Azure RBAC Roles (Assign Permissions)** | ‚ùå No | No `Microsoft.Authorization/roleAssignments/write` permission. |
| **Manage Other Azure Resources (Non-AKS)** | ‚ùå No | No `Microsoft.Resources/*` write permissions. |
| **Delete or Modify Resource Groups** | ‚ùå No | Only `read` permission for resource groups. |
| **Modify Deployments, Pods, or Services** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/apps/deployments/write` permission. |
| **Delete Kubernetes Resources** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/*/delete` permission. |
| **Create Namespaces in Kubernetes** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/namespaces/write` permission. |
| **Modify Network Policies or Ingress Controllers** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/networking.k8s.io/networkpolicies/write` permission. |
| **Modify ConfigMaps or Persistent Volume Claims (PVCs)** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/configmaps/write` permission. |
| **Modify Kubernetes Resource Quotas** | ‚ùå No | No `Microsoft.ContainerService/managedClusters/resourcequotas/write` permission. |

## üìå Summary
| **Category** | **‚úÖ Can Do?** | **‚ùå Cannot Do?** |
|-------------|--------------|------------------|
| **View Azure Authorization & Resources** | ‚úÖ Yes | ‚ùå Cannot modify RBAC or resource groups. |
| **View Kubernetes Workloads (Pods, Deployments, Namespaces)** | ‚úÖ Yes (Read-Only) | ‚ùå Cannot modify or delete workloads. |
| **View Network Policies & Ingress Controllers** | ‚úÖ Yes | ‚ùå Cannot create or modify network configurations. |
| **Monitor Cluster Health & Events** | ‚úÖ Yes | ‚ùå Cannot change monitoring settings. |
| **Modify Kubernetes Resources (Inside Cluster)** | ‚ùå No | Needs additional role for Kubernetes management. |


## Login test 
```
alokadhao@192 01-aks_create % az aks get-credentials \
--resource-group resource-group-4 \
--name aks1 \
--overwrite-existing
Merged "aks1" as current context in /Users/alokadhao/.kube/config
alokadhao@192 01-aks_create % kubelogin convert-kubeconfig -l azurecli
alokadhao@192 01-aks_create % kubectl get nodes
Error from server (Forbidden): nodes is forbidden: User "user5@casacloud.com" cannot list resource "nodes" in API group "" at the cluster scope: User does not have access to the resource in Azure. Update role assignment to allow access.
alokadhao@192 01-aks_create % kubectl get pods 
No resources found in default namespace.
alokadhao@192 01-aks_create % kubectl get deployments 
No resources found in default namespace.
```
![](images/2025-03-16-19-23-57.png)

![](images/2025-03-16-19-23-33.png)

![](images/2025-03-16-19-21-48.png)

![](images/2025-03-16-19-22-37.png)

```
alokadhao@192 01-aks_create % kubectl get clusterroles
Error from server (Forbidden): clusterroles.rbac.authorization.k8s.io is forbidden: User "user5@casacloud.com" cannot list resource "clusterroles" in API group "rbac.authorization.k8s.io" at the cluster scope: User does not have access to the resource in Azure. Update role assignment to allow access.
alokadhao@192 01-aks_create % kubectl get roles       
Error from server (Forbidden): roles.rbac.authorization.k8s.io is forbidden: User "user5@casacloud.com" cannot list resource "roles" in API group "rbac.authorization.k8s.io" in the namespace "default": User does not have access to the resource in Azure. Update role assignment to allow access.
```